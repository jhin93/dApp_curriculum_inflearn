
_프론트엔드 개발을 하면서 마주칠 메타마스크 에러 해결책에 대한 강의.

0:20 | rpc 에러 해결 방법

    메타마스크를 프라이빗 네트워크(가나슈 서버)에 연결해서 트랜잭션을 보낼 때, 간혹 rpc 에러를 마주하게 됨.
    이 상황이 벌어질 수 있는 시나리오 : 
    메타마스크를 쓰면서 dApp을 테스팅하다가 가나슈에 있는 계정 BALANCE들을 리셋해서 새롭게 테스팅하고 싶음.
    그래서 가나슈를 RESTART(설정 -> 우측상단 RESTART) 하게 되었고, 재배포(truffle migrate --compile-all --reset --network ganache).
    댑을 다시 실행(npm run dev).
    그리고 다시 매물 구입 -> 트랜잭션을 보냄. 

    =======> 여기서 바로 rpc 에러가 생김.

    이유 : 가나슈를 RESTART했기 때문에 메타마스크 캐시에 남아있는 전 트랜잭션 정보들이 무용지물이 되면서 rpc에러가 발생.
    한마디로, 현재 어느 네트워크에 연결되어있는 지 메타마스크가 헷갈려 함.

    2가지 해결책이 있음.

    1. 가나슈의 네트워크 ID를 바꾸는 것.

    설정-SERVER 의 NETWORK ID를 바꾸고 (ex 5777 -> 5778) save&restart 실행.
    그리고 재배포(truffle migrate --compile-all --reset --network ganache).
    그리고 다시 앱 실행 npm run dev.

    그 후 메타 마스크의 네트워크를 다른 네트워크(ex 메인네트워크)로 잠깐 바꿨다가 다시 돌아오기(localhost 8545).
    메타 마스크 내에서 연결상태를 새로고침하는 방법.
    (메타 마스크 개발자들이 이 작업을 자동으로 되게끔 해줬으면 한다는데, 아마 지금은 업데이트가 됐을 지도 모름)

    다시 트랜잭션(ex 매물 매입)을 보내면 rpc에러 없이 트랜잭션이 통과됨.
    

    2. 메타 마스크 내에서 해결. 

    메타 마스크 설정 진입. reset account를 하라는데 안보임..
    캐시 히스토리를 전부 지운다고 함. 
    장점 - 간단하다.
    단점 - 지금까지의 트랜잭션 내역들을 모두 지움.

 






